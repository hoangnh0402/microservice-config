# Cổng của order-service
server.port=8082

# Địa chỉ của Eureka Server
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# Bật tính năng circuit breaker cho Feign
feign.circuitbreaker.enabled=true

# (Quan trọng) Đảm bảo Spring Cloud Load Balancer được tích hợp với Eureka
spring.cloud.loadbalancer.eureka.enabled=true

# --- Cấu hình chi tiết cho Resilience4j Circuit Breaker ---
# Tên "product-service" phải khớp với name trong @FeignClient
# Ghi nhận các exception cụ thể này là lỗi để kích hoạt fallback
resilience4j.circuitbreaker.instances.product-service.record-exceptions=feign.FeignException$ServiceUnavailable, java.net.ConnectException, feign.RetryableException

# Tỷ lệ lỗi để mở mạch (vd: 50% request lỗi trong 10 request gần nhất)
resilience4j.circuitbreaker.instances.product-service.failure-rate-threshold=50
# Số lượng request tối thiểu để tính tỷ lệ lỗi
resilience4j.circuitbreaker.instances.product-service.sliding-window-size=10
# Thời gian chờ trước khi chuyển từ Mở sang Nửa-Mở
resilience4j.circuitbreaker.instances.product-service.wait-duration-in-open-state=10s